<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="style.css">
  </head>

  <body>
    <form novalidate>
      <p>
        <label for="mail">
          <span>Please enter an email adress:</span>
          <input type="email" id="mail" name="mail" required minlenght="8" />
          <span class="error" aria-live="polite"></span>
        </label>
      </p>
      <button>Submit</button>
    </form>

    <script>
      const form = document.querySelector("form");
      const email = document.getElementById("mail");
      const emailError = document.querySelector("#mail + span.error");

      email.addEventListener("input", (event) => {
        if (email.validity.valid) {
          emailError.textContent = "";
          emailError.className = "error";
        } else {
          showError();
        }
      });

      form.addEventListener("submit", (event) => {
        if (!email.validity.valid) {
          showError();
          event.preventDefault();
        }
      });

      function showError() {
        if (email.validity.valueMissing) {
          emailError.textContent = "You need to enter an email adress";
        } else if (email.validity.typeMismatch) {
          emailError.textContent = "Entered value needs to be an email adress";
        } else if (email.validity.tooShort) {
          emailError.textContent = "Email should be at least ${email.minLenght} characters; you entered ${email.value.lenght}.`;
        }

        email.Error.className = "error active";
      }
    </script>
  </body>
</html>
